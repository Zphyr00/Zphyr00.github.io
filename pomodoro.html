<!doctype html>
<html lang="ru-RU">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <title>Z_phyr — разработчик, фотограф и просто хороший человек</title>
  <meta name="description" content="Портфолио Z_phyr — веб-разработчика, консультанта по безопасности, тестировщика, фотографа, ретушера">
  <meta name="author" content="Z_phyr">
  <meta property="og:url" content="https://zphyr00.github.io/">
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Z_phyr — разработчик, фотограф и просто хороший человек" />
  <meta property="og:description" content="Личная страница Z_phyr — веб-разработчика, консультанта по безопасности, тестировщика, фотографа, ретушера" />
  <meta property="og:image" content="https://zphyr00.github.io/ogimg.jpg">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0099ff">
  <meta name="msapplication-TileColor" content="#0099ff">
  <meta name="theme-color" content="#0099ff">
  <script>!function(b){"use strict";var a=function(i,d,k){function j(a){if(c.body)return a();setTimeout(function(){j(a)})}function e(){a.addEventListener&&a.removeEventListener("load",e),a.media=k||"all"}var f,c=b.document,a=c.createElement("link");if(d)f=d;else{var g=(c.body||c.getElementsByTagName("head")[0]).childNodes;f=g[g.length-1]}var l=c.styleSheets;a.rel="stylesheet",a.href=i,a.media="only x",j(function(){f.parentNode.insertBefore(a,d?f:f.nextSibling)});var h=function(c){for(var d=a.href,b=l.length;b--;)if(l[b].href===d)return c();setTimeout(function(){h(c)})};return a.addEventListener&&a.addEventListener("load",e),a.onloadcssdefined=h,h(e),a};"undefined"!=typeof exports?exports.loadCSS=a:b.loadCSS=a}("undefined"!=typeof global?global:this),function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var d=a.document.getElementsByTagName("link"),c=0;c<d.length;c++){var b=d[c];"preload"===b.rel&&"style"===b.getAttribute("as")&&(a.loadCSS(b.href,b,b.getAttribute("media")),b.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this)</script>
  <style>body,html{-webkit-font-smoothing:antialiased}html{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent;text-rendering:optimizeLegibility}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}body{margin:0;overflow-x:hidden;font:caption;font-size:calc(1rem + .25vw);font-weight:400;line-height:1.5;color:#333;background-color:#eee}.ios body{font-family:"-apple-system",HelveticaNeue,sans-serif}[role=button],a,area,button,input:not([type=range]) label,select,summary,textarea{-ms-touch-action:manipulation;touch-action:manipulation}a{color:#09f;-webkit-text-decoration-skip:ink;text-decoration-skip:ink;background-color:transparent;-webkit-text-decoration-skip:objects;-webkit-transition:color .3s;transition:color .3s}h1,h2,h3,h4,h5,h6{font-weight:700;line-height:1.33;color:inherit;margin-bottom:.5rem}@-webkit-keyframes fade-in{100%{opacity:1}}@keyframes fade-in{100%{opacity:1}}.skip{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;-webkit-clip-path:inset(50%);clip-path:inset(50%);border:0}.section{display:grid;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:100vh;padding:35vw 1.25rem}.section--label{margin:0 0 3.25rem;font-size:2.25rem;font-weight:700}.section--title{margin:5rem 0 1.5rem;font-size:.875rem;color:#333;line-height:1.2;text-transform:uppercase}.section--title:first-child{margin-top:0}.section--title .section--label{letter-spacing:.125rem}.section--intro{color:#eee;background-color:#09f}.section--intro .section--label{display:block;grid-column:2;margin:0 0 1.675rem;font-size:.75rem;font-weight:700;color:#333;text-transform:uppercase}.section--intro .section--title{padding:0 2.5vw;margin:0;font-size:7vw;font-weight:700;color:#eee;line-height:1.1;text-transform:none;-webkit-transition:opacity .9s ease-in-out,-webkit-transform .9s ease-in-out;transition:opacity .9s ease-in-out,transform .9s ease-in-out,-webkit-transform .9s ease-in-out}.section--intro .scroll-link{display:inline-block;color:#eee;text-decoration:none;border-bottom:1px solid #eee}.section--intro .scroll-link--name{margin-bottom:.75rem}@media (min-width:48rem){.section{padding:27.5vw 20vw}}@media (min-width:75rem){.section{grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;padding:20vh 7.5vh}}@media (min-width:90rem){.section{padding:20vh 10vh},.section--intro .section--title{font-size:3.75vw}}.page{opacity:0}</style>
  <script id="loadcss">
  loadCSS("\/main.css", document.getElementById("loadcss"));
  </script>
  <noscript>
    <link href='https://zphyr00.github.io/main.css' rel='stylesheet' />
  </noscript>
  <link rel="canonical" href="index.html">
  <link rel="preconnect" href="index.html">
</head>
<body>
<div id="timer_display">
    <div id="timer_display_duration">00:00</div>
    <div id="timer_display_name">Работа</div>
</div>
<div id="timer_button_container">
    <button type="button" id="timer_button">Старт</button>
</div>
<script>class PomodoroTimerComponent
{
    static get STATE_STOPPED() {
        return 1;
    }
    static get STATE_RUNNING() {
        return 2;
    }
    /**
     * PomodoroTimer component.
     * @param {Object} options Options: defaultTimerQueue.
     */
    constructor(options={})
    {
        this.timerNameElem = document.getElementById('timer_display_name');
        this.timerDurationElem = document.getElementById('timer_display_duration');
        this.timerButtonElem = document.getElementById('timer_button');
        this.timerQueue = new TimerQueue();
        this.defaultTimerQueue = options.defaultTimerQueue || [
            new Timer("Работа", 25*60),
            new Timer("Отдых", 5*60)
        ];
        this.currentTimer = null; // no timer until user starts timer queue
        this.currentTimerStart = 0;
        this.currentTimerSecondsLeft = 0;
        this.state = PomodoroTimerComponent.STATE_STOPPED;
        this.initEventHandlers();
    }
    /**
     * Create DOM event handlers.
     */
    initEventHandlers()
    {
        document.addEventListener('click', function(e){
            if (e.target.id === this.timerButtonElem.id) {
                if (this.state === PomodoroTimerComponent.STATE_STOPPED) {
                    this.event_startTimer.call(this);
                } else if (this.state === PomodoroTimerComponent.STATE_RUNNING) {
                    this.event_stopTimer.call(this);
                }
            }
        }.bind(this), false);
    }
    /**
     * Update DOM when state changes occur.
     */
    render()
    {
        if (this.state === PomodoroTimerComponent.STATE_STOPPED) {
            this.timerButtonElem.textContent = "Старт";
            if (this.timerQueue.isEmpty()) {
                this.timerNameElem.textContent = "Готово";
                this.timerDurationElem.textContent = this.formatDuration(0);
            }
        } else if (this.state === PomodoroTimerComponent.STATE_RUNNING) {
            this.timerButtonElem.textContent = "Стоп";
            if (this.currentTimer) {
                this.timerNameElem.textContent = this.currentTimer.name;
            }
            if (this.currentTimerSecondsLeft >= 0) {
                this.timerDurationElem.textContent = this.formatDuration(this.currentTimerSecondsLeft);
            }
        }
    }
    /**
     * Returns a duration in seconds as minutes and seconds.
     * @param {Number} duration_in_seconds Duration in seconds.
     * @returns {String} Duration formatted as "MM:SS"
     */
    formatDuration(duration_in_seconds)
    {
        let minutes = (duration_in_seconds / 60) | 0;
        let seconds = (duration_in_seconds % 60) | 0;
        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;
        return minutes + ":" + seconds;
    }
    /**
     * Re-create the timer queue using the default timer queue option.
     */
    createTimerQueue()
    {
        this.timerQueue.clear();
        Array.prototype.map.call(this.defaultTimerQueue, function(timer){
            this.timerQueue.push(timer);
        }.bind(this));
    }
    /**
     * Fetches the next timer in the queue and sets it as the current timer
     * to be rendered on screen.
     */
    getNextTimerFromQueue()
    {
        this.currentTimer = this.timerQueue.pop();
        if (this.currentTimer) {
            this.currentTimerStart = Date.now();
            this.currentTimerSecondsLeft = this.currentTimer.duration;
        }
        return this.currentTimer;
    }
    /**
     * User action: Start timer.
     */
    event_startTimer()
    {
        function timerUpdate() {
            this.currentTimerSecondsLeft = (this.currentTimer.duration - (((Date.now() - this.currentTimerStart) / 1000) | 0));
            // Update UI
            requestAnimationFrame(function(){
                this.render();
            }.bind(this));

            // If it reaches the end, look for next timer
            if (this.currentTimerSecondsLeft <= 0) {
                if (!this.getNextTimerFromQueue()) {
                    // We are at the end of the queue
                    this.event_stopTimer.call(this);
                }
            }
        }
        this.createTimerQueue();
        this.getNextTimerFromQueue();
        this.state = PomodoroTimerComponent.STATE_RUNNING;
        // The following will call render() at 1s intervals
        timerUpdate.call(this);
        this.timerInterval = setInterval(timerUpdate.bind(this), 1000);
    }
    /**
     * User action: Stop timer.
     * Or, when timer queue is empty.
     */
    event_stopTimer()
    {
        if (this.timerInterval) {
            clearInterval(this.timerInterval);
        }
        this.currentTimer = null;
        this.currentTimerSecondsLeft = 0;
        this.state = PomodoroTimerComponent.STATE_STOPPED;
        requestAnimationFrame(function(){
            this.render();
        }.bind(this));
    }
}</script>
  <script defer src='https://zphyr00.github.io/main.bundle.js'></script>
</body>
</html>
